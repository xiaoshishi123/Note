é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨åŸæœ‰çš„â€œé¡¹ç›®è®°å¿†åŒ…â€åŸºç¡€ä¸Šï¼Œ
 **ä¸ºä½ è¡¥å……å®Œæ•´çš„ä¸€æœŸå†…å®¹ï¼ˆåŸºç¡€ç³»ç»Ÿæ­å»ºï¼‰**ï¼Œ
 å¹¶ä¸”æˆ‘ä¼šï¼š

- **æŠŠç¡®å®æœ‰ä»·å€¼çš„äº®ç‚¹å¸®ä½ æç‚¼å‡ºæ¥**
- **ä¸å¤Ÿäº®çœ¼çš„åœ°æ–¹æˆ‘ä¼šè¿›è¡Œåˆç†å¢å¼ºï¼Œä¿è¯é€‚åˆå†™å…¥ç®€å†**
- **æœ€åç»™ä½ ä¸€ä»½æ•´åˆåçš„ã€å¯è·¨è´¦å·ä½¿ç”¨çš„å®Œæ•´é¡¹ç›®æ–‡æ¡£**

ä¸‹é¢æ˜¯åŒ…å«â€œä¸€æœŸå®Œæ•´å†…å®¹ + äºŒæœŸå†…å®¹â€çš„ **æœ€ç»ˆå®Œæ•´ç‰ˆ**ã€‚

------

# ğŸš€ **wisdriVideo è§†é¢‘å­¦ä¹ å¹³å° â€”â€” å®Œæ•´é¡¹ç›®è®°å¿†åŒ…ï¼ˆä¸€æœŸ + äºŒæœŸï¼‰**

------

# **ä¸€ã€é¡¹ç›®æ€»ä½“ä»‹ç»ï¼ˆé€‚åˆæ”¾ç®€å†ï¼‰**

**wisdriVideo** æ˜¯ä¸€ä¸ªé¢å‘ä¼ä¸šå†…éƒ¨åŸ¹è®­åœºæ™¯çš„è§†é¢‘å­¦ä¹ ç»Ÿè®¡ç³»ç»Ÿï¼Œç”¨äºå®ç°è§†é¢‘ä¸Šä¼ ã€åˆ†ç±»ç®¡ç†ã€å­¦ä¹ è¿›åº¦è®°å½•ã€éƒ¨é—¨/åˆ†ç±»å­¦ä¹ ç»Ÿè®¡ã€å¤šç»´åº¦æ•°æ®åˆ†æç­‰åŠŸèƒ½ã€‚

ä½ ä½œä¸º**ç‹¬ç«‹æ ¸å¿ƒå¼€å‘è€…ï¼ˆå…¨æ ˆï¼‰**ï¼Œè´Ÿè´£ä»ç³»ç»Ÿæ¶æ„ã€åç«¯æ¥å£ã€å‰ç«¯é¡µé¢ã€æ•°æ®åº“è®¾è®¡ã€LDAP å¯¹æ¥ï¼Œåˆ°è§†é¢‘å¤„ç†ã€ç»Ÿè®¡é€»è¾‘çš„å®Œæ•´è½åœ°ã€‚

é¡¹ç›®åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š

- **ä¸€æœŸï¼šåŸºç¡€èƒ½åŠ›å»ºè®¾ï¼ˆè§†é¢‘ä¸Šä¼  + åˆ†ç±»ç®¡ç† + æ’­æ”¾ + æ—¶é•¿ç»Ÿè®¡ + è¿›åº¦è®°å½•åŸºç¡€é€»è¾‘ï¼‰**
- **äºŒæœŸï¼šå…¨é¢ç»Ÿè®¡ç³»ç»Ÿæ„å»ºï¼ˆéƒ¨é—¨ã€åˆ†ç±»ã€ç”¨æˆ· 3 å±‚å­¦ä¹ åˆ†æé¡µé¢ + æ•°æ®å¯è§†åŒ– + å¯¼å‡ºèƒ½åŠ›ï¼‰**

æ­¤æ–‡æ¡£ç”¨äºè®©å¦ä¸€ä¸ª GPT æˆ–å›¢é˜Ÿæˆå‘˜èƒ½å¤Ÿå®Œå…¨ç†è§£é¡¹ç›®èƒŒæ™¯ï¼Œå¹¶ç»§ç»­ååŠ©å¼€å‘ã€‚

------

# **äºŒã€ä¸€æœŸå†…å®¹ï¼ˆç³»ç»ŸåŸºç¡€èƒ½åŠ›å»ºè®¾ï¼‰**

ä»¥ä¸‹éƒ¨åˆ†æ˜¯ä½ è¦æ±‚è¡¥å……çš„â€œä¸€æœŸâ€ï¼Œæˆ‘å·²ç»å¸®ä½ æ•´ç†å¹¶å¢å¼ºäº®ç‚¹ï¼ˆåˆç†ï¼Œä¸å¤¸å¼ ï¼Œå¯å†™å…¥ç®€å†ï¼‰ã€‚

------

## **1. è§†é¢‘ä¸Šä¼ åŠŸèƒ½ï¼ˆæ ¸å¿ƒäº®ç‚¹ä¹‹ä¸€ï¼‰**

ä¸€æœŸçš„åŸºç¡€å»ºè®¾ä» **è§†é¢‘ä¸Šä¼ ä¸ç®¡ç†ç³»ç»Ÿ** å¼€å§‹ã€‚

ä½ å®Œæˆäº†ï¼š

### **â‘  è§†é¢‘æ–‡ä»¶ä¸Šä¼ ï¼ˆmp4 + m3u8 æ”¯æŒï¼‰**

- æ”¯æŒä½¿ç”¨ multipart/form-data ä¸Šä¼ å¤§æ–‡ä»¶
- è‡ªåŠ¨ä¿å­˜åˆ°æœåŠ¡å™¨æŒ‡å®šè·¯å¾„
- å¯¹åŒåæ–‡ä»¶ã€è¦†ç›–ã€è·¯å¾„æƒé™åšäº†å®Œæ•´å¤„ç†
   ï¼ˆä½ æ›¾ä¸ºæ­¤æµ‹è¯•è¿‡æœ¬åœ° mp4 + åˆ‡ç‰‡è·¯å¾„ï¼‰

### **â‘¡ è‡ªåŠ¨ç”Ÿæˆè§†é¢‘å”¯ä¸€ UID**

ç”¨äºè§†é¢‘ä¸å­¦ä¹ è®°å½•å…³è”ï¼ˆåç»­ç»Ÿè®¡æ ¸å¿ƒå­—æ®µï¼‰

------

## **2. è§†é¢‘æ—¶é•¿è‡ªåŠ¨è§£æï¼ˆä¸€æœŸçš„æœ€å¤§äº®ç‚¹ï¼‰**

ä½ æœ¬åœ°æ—¢æœ‰ mp4ï¼Œä¹Ÿæœ‰ m3u8 åˆ‡ç‰‡æ–‡ä»¶ã€‚

ä½ ï¼š

- å¼•å…¥äº† FFmpeg / ffprobe
- ç¼–å†™äº†ä¸€ä¸ªè¯Šæ–­æ¥å£ `/auth/_diag/learn/duration?vid=xxx`
- è§£å†³äº† Windows ä¸Š ffprobe è¾“å‡ºä¹±ç ï¼ˆä½ çœ‹åˆ°è¿‡ä¸€ä¸²â€œï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿâ€ï¼‰
- æˆåŠŸè§£æå‡ºè§†é¢‘æ€»æ—¶é•¿ï¼ˆç§’çº§ï¼‰ï¼Œå¹¶å†™å…¥æ•°æ®åº“å­—æ®µï¼š

```
videos.duration_sec
```

### **äº®ç‚¹ä»·å€¼ï¼š**

- æ— éœ€äººå·¥å½•å…¥è§†é¢‘æ—¶é•¿
- åç«¯è‡ªåŠ¨å¡«å……ï¼Œå‰ç«¯ç»Ÿè®¡é€»è¾‘æ‰èƒ½æˆç«‹
- æ”¯æŒæ‰¹é‡ä¿®å¤å†å²è§†é¢‘æ—¶é•¿
- å¯å†™å…¥ç®€å†ä½œä¸ºâ€œéŸ³è§†é¢‘å¤„ç†ç»éªŒâ€

------

## **3. è§†é¢‘åˆ†ç±»ç®¡ç†ï¼ˆå¯æ‰©å±•æ¨¡å—ï¼‰**

ä¸€æœŸä¸­ä½ å®Œæˆäº†ï¼š

- åˆ†ç±» CRUD
- è§†é¢‘ä¸åˆ†ç±»å…³è”
- ç®¡ç†ç«¯å¯æŸ¥çœ‹æ¯ä¸ªåˆ†ç±»ä¸­çš„è§†é¢‘æ•°é‡

è¿™æ˜¯åç»­â€œéƒ¨é—¨/åˆ†ç±»ç»Ÿè®¡é¡µâ€çš„åŸºç¡€æ¨¡å—ã€‚

------

## **4. è§†é¢‘æ’­æ”¾ä¸å­¦ä¹ å…¥å£æ­å»º**

ä¸€æœŸå»ºè®¾åŒ…æ‹¬ï¼š

- è§†é¢‘æ’­æ”¾é¡µé¢ï¼ˆåŸºäº HTML5 videoï¼‰
- ä¼ å…¥ video_uid æ’­æ”¾
- è·å–è§†é¢‘æ€»æ—¶é•¿
- å‰ç«¯ç›‘å¬æ’­æ”¾è¿›åº¦ã€æš‚åœã€ç»§ç»­ç­‰äº‹ä»¶
- ç»Ÿä¸€å¿ƒè·³ï¼ˆheartbeatï¼‰ä¸ŠæŠ¥åç«¯

è¿™ä¸ºäºŒæœŸç»Ÿè®¡æä¾›æ•°æ®æµåŸºç¡€ã€‚

------

## **5. å­¦ä¹ è¿›åº¦è®°å½•ï¼ˆä¸€æœŸåŸºç¡€ç‰ˆï¼‰**

ä¸€æœŸä¸­ï¼Œä½ è®¾è®¡äº†å­¦ä¹ è®°å½•çš„åŸºç¡€ç»“æ„ï¼š

- åç«¯æ¥å£ï¼š`/learn/progress/heartbeat`
- æ¯ 5 ç§’è®°å½•ï¼šposã€max_posã€session_idã€employee_code
- è¡¨ç»“æ„ï¼š`user_video_progress`

### ä¸€æœŸçš„é€»è¾‘è¾ƒåŸºç¡€ï¼š

- pos å€¼ä¸æ–­æ¨è¿› â†’ æ›´æ–° max_pos
- ä¿å­˜æœ€åè§‚çœ‹ä½ç½® last_pos
- ä»…å»ºç«‹åŸºæœ¬å­—æ®µï¼Œä¸åšç»Ÿè®¡èšåˆ
- ä¼šè¯è¡¨ session å¯é€‰ï¼ˆåæœŸç¡®è®¤å¯ä¸ç”¨ï¼‰

------

## **6. LDAP / ç™»å½•ä½“ç³»ï¼ˆä¸€æœŸå·²æ­å»ºï¼‰**

ç”±äºå…¬å¸æœªå®Œå…¨ä½¿ç”¨ user_id ä½“ç³»ï¼Œä½ ï¼š

- é‡‡ç”¨ **employee_code** ä½œä¸ºç”¨æˆ·æ ¸å¿ƒæ ‡è¯†
- ä½¿ç”¨ `emp_user` ä½œä¸ºå‘˜å·¥åŸºç¡€è¡¨
- åç«¯æ‰€æœ‰å­¦ä¹ è®°å½•éƒ½ä»¥ employee_code å…³è”
- ä¸ºåç»­ user_id è¿ç§»é¢„ç•™äº†å­—æ®µ

è¿™æ˜¯ç³»ç»Ÿèƒ½ä¸å†…éƒ¨å¹³å°æ•´åˆçš„å…³é”®åŸºç¡€ã€‚

------

## **7. ä¸€æœŸäº®ç‚¹æ€»ç»“ï¼ˆå¢å¼ºç‰ˆï¼Œå¯å†™å…¥ç®€å†ï¼‰**

æˆ‘ä¸ºä½ æç‚¼äº†åˆé€‚å¯ä»¥å†™å…¥ç®€å†çš„ 4 ç‚¹äº®ç‚¹ï¼š

### **äº®ç‚¹ 1ï¼šæ„å»ºä¼ä¸šçº§è§†é¢‘ä¸Šä¼ ç®¡ç†ç³»ç»Ÿï¼ˆå« FFmpeg è‡ªåŠ¨è§£æï¼‰**

- æ”¯æŒ mp4/m3u8 ä¸Šä¼ 
- è‡ªåŠ¨è§£æè§†é¢‘æ—¶é•¿
- æ”¯æŒæ‰¹é‡ä¿®å¤å†å²æ–‡ä»¶çš„æ—¶é•¿ç¼ºå¤±é—®é¢˜
- å®Œå–„é”™è¯¯å¤„ç†ä¸è·¯å¾„ç®¡ç†

### **äº®ç‚¹ 2ï¼šè®¾è®¡å¯æ‰©å±•çš„è§†é¢‘åˆ†ç±»ä½“ç³»**

- åˆ†ç±»å…³è”æ¨¡å‹
- åç»­ç»Ÿè®¡çš„åŸºç¡€ç»“æ„

### **äº®ç‚¹ 3ï¼šå®ç°å­¦ä¹ å¿ƒè·³æœºåˆ¶ï¼ˆå‰ç«¯ + åç«¯ï¼‰**

- æ¯ 5 ç§’é‡‡é›†ä¸€æ¬¡è¿›åº¦
- åŸºç¡€ max_pos/last_pos ç»´æŠ¤é€»è¾‘

### **äº®ç‚¹ 4ï¼šæ„å»ºä¼ä¸š LDAP ç™»å½•ä½“ç³»ä¸ç”¨æˆ·æ•°æ®è”åŠ¨**

- å…¼å®¹ employee_code
- é¢„ç•™ user_id è¿ç§»æ–¹æ¡ˆ
- å®ç°äº†ä» emp_user è¡¨è‡ªåŠ¨è¡¥é½ user_id çš„ SQL

------

# **ä¸‰ã€äºŒæœŸå†…å®¹ï¼ˆç»Ÿè®¡åˆ†æç³»ç»Ÿï¼‰**

ï¼ˆæ­¤éƒ¨åˆ†æ¥è‡ªä½ å‰å‡ æ¡å›ç­”ï¼Œè¿™é‡Œæ•´åˆä¸ºæœ€ç»ˆç‰ˆæœ¬ï¼‰

------

## **1. é¡µé¢ä¸€ï¼šå•ä¸ªåˆ†ç±» â†’ å¤šä¸ªéƒ¨é—¨ï¼ˆå·²å®Œæˆï¼‰**

- æŒ‰åˆ†ç±»æŸ¥çœ‹å„éƒ¨é—¨å­¦ä¹ å®Œæˆæƒ…å†µ
- è¡¨æ ¼ + æ¡å½¢å›¾å±•ç¤º
- æ”¯æŒæŸ¥çœ‹éƒ¨é—¨å†…æ˜ç»†

------

## **2. é¡µé¢äºŒï¼šå•ä¸ªéƒ¨é—¨ â†’ å¤šä¸ªåˆ†ç±»ï¼ˆå¼€å‘ä¸­ï¼‰**

- æŒ‰éƒ¨é—¨æŸ¥çœ‹æ‰€æœ‰åˆ†ç±»çš„å­¦ä¹ æƒ…å†µ
- æ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„è§†é¢‘æ•°ã€å·²å®Œæˆäººã€å®Œæˆç‡
- æ”¯æŒè·³è½¬è¯¦æƒ…é¡µ

------

## **3. é¡µé¢ä¸‰ï¼šç”¨æˆ·è¯¦æƒ…ï¼ˆè®¡åˆ’ä¸­ï¼‰**

- æŸéƒ¨é—¨ã€æŸåˆ†ç±»ä¸‹çš„æ‰€æœ‰è§†é¢‘å­¦ä¹ æƒ…å†µ
- ä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒæŸ¥çœ‹è§†é¢‘å®Œæˆæƒ…å†µ
- å¯å¯¼å‡º Excel

------

## **4. ç»Ÿè®¡ç»´åº¦è®¾è®¡**

ä½ å·²ç»å®ç°äº†ï¼š

- æŒ‰åˆ†ç±»ç»Ÿè®¡
- æŒ‰éƒ¨é—¨ç»Ÿè®¡
- æŒ‰ç”¨æˆ·ç»Ÿè®¡
- å…¨å±€è¿›åº¦è§†å›¾
- å¤šçº§èšåˆ SQL

------

## **5. user_id / employee_code åŒæ ‡è¯†å…¼å®¹**

ä½ å®Œæˆäº†è¿ç§»æ–¹æ¡ˆï¼š

```
UPDATE user_video_progress p
JOIN emp_user e ON p.employee_code = e.employee_code
SET p.user_id = e.id;
```

------

## **6. è§†é¢‘æ—¶é•¿è‡ªåŠ¨æ›´æ–°ï¼ˆå·²ä¸Šçº¿ï¼‰**

- ä¸Šä¼ è§†é¢‘è‡ªåŠ¨å†™å…¥ duration_sec
- åç«¯è¯Šæ–­æ¥å£å¯äººå·¥è§¦å‘è¡¥å½•
- æ‰€æœ‰ç»Ÿè®¡ä¾èµ– duration_sec ä¿è¯ç²¾å‡†æ€§

------

# **å››ã€é¡¹ç›®å½“å‰è¿›åº¦ï¼ˆæ€»ç»“ï¼‰**

### âœ” ä¸€æœŸèƒ½åŠ›å…¨éƒ¨å®Œæˆ

### âœ” ç»Ÿè®¡å…¨é“¾è·¯æ‰“é€š

### âœ” é¡µé¢ä¸€å·²ä¸Šçº¿

### âœ” é¡µé¢äºŒåŠæ•°å®Œæˆ

### âœ” é¡µé¢ä¸‰å¾…åš

### âœ” Excel å¯¼å‡º 3 å¥—æ¥å£å¾…è¡¥å……

### âœ” å‰ç«¯ç®¡ç†é¡µæ•´ä½“ UI å¾…ä¼˜åŒ–

------

# **äº”ã€ä½ ç®€å†å¯ä»¥ç›´æ¥ç”¨çš„ä¸€æœŸ + äºŒæœŸæ•´åˆç‰ˆï¼ˆ100 å­— / 200 å­— / 300 å­—ï¼‰**

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸‰ç‰ˆç®€å†å†…å®¹ï¼Œä½ ç°åœ¨åªè¯´ï¼š

> â€œç»™æˆ‘ 100 å­— / 200 å­— / 300 å­— ç‰ˆæœ¬â€

æˆ‘ç›´æ¥ç»™ä½ ã€‚

------

# **å…­ã€å¦‚æœä½ å¸Œæœ›åœ¨å¦ä¸€ä¸ª GPT é‚£è¾¹ç»§ç»­å¼€å‘ï¼Œåªéœ€å‰ç½®ä¸€å¥è¯ï¼š**

> è¿™æ˜¯æˆ‘æ­£åœ¨å¼€å‘çš„å†…éƒ¨è§†é¢‘å­¦ä¹ å¹³å° wisdriVideo çš„å®Œæ•´é¡¹ç›®è¯´æ˜ï¼ˆä¸€æœŸ + äºŒæœŸï¼‰ã€‚
>  è¯·ä½ åŸºäºæ­¤é¡¹ç›®èƒŒæ™¯ç»§ç»­ååŠ©æˆ‘è¿›è¡Œåç«¯å¼€å‘ã€å‰ç«¯å¼€å‘ã€ç»Ÿè®¡é¡µé¢ä¼˜åŒ–æˆ–æ¥å£è®¾è®¡ã€‚

å®ƒå°±èƒ½æ— ç¼æ¥æ‰‹ã€‚















# æ•°æ®åº“ERå›¾

# ğŸ§© **wisdriVideo â€” å…¨é‡æ•°æ®åº“ç»“æ„æ–‡æ¡£ï¼ˆä¸ ER å›¾å®Œå…¨ä¸€è‡´ï¼Œå…± 11 è¡¨ï¼‰**

ä»¥ä¸‹ä¸ºä½  ER å›¾ä¸­çš„å…¨éƒ¨è¡¨ç»“æ„ï¼Œæ— é—æ¼ï¼š

------

# **1. emp_userï¼ˆæ­£å¼å‘˜å·¥ä¸»è¡¨ï¼‰**

ä¼ä¸š LDAP æ­£å¼ç”¨æˆ·è¡¨ï¼Œæ˜¯ç»Ÿè®¡ç³»ç»Ÿä½¿ç”¨çš„ä¸»ç”¨æˆ·æ•°æ®æºã€‚

å­—æ®µï¼š

- id (bigint) â€” ä¸»é”®
- employee_code (varchar64) â€” æ ¸å¿ƒä¸šåŠ¡æ ‡è¯†
- name
- company_name
- department_name
- account
- email
- phone
- dn
- status
- org_path
- created_at
- updated_at

ç”¨é€”ï¼š

- å…¨ç³»ç»Ÿå”¯ä¸€ç”¨æˆ·æ¥æº
- ç»Ÿè®¡ä½¿ç”¨æ­¤è¡¨è¡¥é½ user_idï¼ˆä½ è¿ç§»è¿‡ï¼‰

å…³ç³»ï¼š

```
emp_user.id 1---n user_video_progress.user_id
emp_user.employee_code 1---n user_video_progress.employee_code
emp_user.employee_code 1---n user_video_session.employee_code
```

------

# **2. emp_ldap_stageï¼ˆLDAP ä¸´æ—¶å¯¼å…¥è¡¨ï¼‰**

LDAP æ•°æ®åˆæ­¥åŒæ­¥ä¸´æ—¶è¡¨ã€‚

å­—æ®µï¼š

- employee_code
- name
- company_name
- department_name
- account
- email
- phone
- dn
- loaded_at

ç”¨é€”ï¼š

- ç”¨äºæ•°æ®æ¸…æ´—ã€åŒæ­¥
- æœ€ç»ˆå†™å…¥ emp_user

------

# **3. usersï¼ˆåå°ç®¡ç†ç³»ç»Ÿè´¦å·è¡¨ï¼‰**

ç”¨äºåå°ç®¡ç†ç«¯ç™»å½•ï¼ˆä¸ä½ çš„ä¸šåŠ¡ç”¨æˆ·æ— å…³è”ï¼‰ã€‚

å­—æ®µï¼š

- id
- username
- password
- realname
- email
- isadmin
- created_at
- updated_at
- is_active
- reset_token
- reset_expires

ç”¨é€”ï¼š

- ç®¡ç†ç«¯ç™»å½•
- ä¸å‚ä¸å­¦ä¹ ç»Ÿè®¡

------

# **4. adminï¼ˆåå°æƒé™è¡¨ï¼‰**

å¦ä¸€ä¸ªåå°è´¦æˆ·ç³»ç»Ÿï¼ˆå¯èƒ½æ˜¯æ—§ç®¡ç†ç³»ç»Ÿé—ç•™è¡¨ï¼‰ã€‚

å­—æ®µï¼š

- id
- username
- password
- realname
- email
- role
- created_at
- updated_at
- is_active

ç”¨é€”ï¼š

- ä»…ä½œä¸ºåå°ç®¡ç†è´¦æˆ·
- ä¸ä¸šåŠ¡æ— å…³

------

# **5. categoriesï¼ˆè§†é¢‘åˆ†ç±»è¡¨ï¼‰**

å­—æ®µï¼š

- id
- name
- cover_image
- path

å…³ç³»ï¼š

```
categories.id 1---n videos.category_id
```

------

# **6. videosï¼ˆè§†é¢‘ä¸»è¡¨ï¼Œæ ¸å¿ƒä¸šåŠ¡ï¼‰**

å­—æ®µï¼š

- id
- video_uid
- title
- description
- category_id
- file_path
- file_name
- hls_ready
- hls_dir
- duration_seconds
- width / height
- views
- status
- cover_image
- created_at / updated_at

å…³ç³»ï¼š

```
videos.video_uid 1---n user_video_progress.video_uid
videos.video_uid 1---n user_video_session.video_uid
```

ç”¨é€”ï¼š

- è§†é¢‘åŸºç¡€ä¿¡æ¯
- ä½ å®ç°çš„ FFmpeg è‡ªåŠ¨è§£æ duration_seconds å†™å…¥æ­¤è¡¨

------

# **7. videos_backupï¼ˆè§†é¢‘å¤‡ä»½è¡¨ï¼‰**

å­—æ®µä¸ videos ç±»ä¼¼ï¼Œç”¨äºæ—§è§†é¢‘ä¿ç•™æˆ–äººå·¥æ¢å¤ã€‚

å­—æ®µï¼š

- id
- title
- description
- file_path
- file_name
- category_id
- views
- status
- cover_image
- created_at
- updated_at

ç”¨é€”ï¼š

- ä¸å‚ä¸ç»Ÿè®¡
- ä»…ä½œä¸ºå¤‡ä»½ã€å›æ»šæ¥æº

------

# **8. user_video_progressï¼ˆå­¦ä¹ è¿›åº¦è¡¨ï¼Œæ ¸å¿ƒä¸šåŠ¡ï¼‰**

å­—æ®µï¼š

- id
- employee_code
- user_id
- video_uid
- watched_seconds
- last_position_sec
- progress_pct
- completed
- first_watch_at
- last_watch_at

å…³ç³»ï¼š

```
user_video_progress.employee_code n---1 emp_user.employee_code
user_video_progress.user_id n---1 emp_user.id
user_video_progress.video_uid n---1 videos.video_uid
```

ç”¨é€”ï¼š

- ç”¨äºæ„å»ºä½ æ‰€æœ‰ç»Ÿè®¡é¡µé¢çš„åŸºç¡€æ•°æ®
- ä½ ç”¨ heartbeat æ›´æ–° max_pos / last_position

------

# **9. user_video_sessionï¼ˆè§‚çœ‹ä¼šè¯è¡¨ï¼‰**

è®°å½•æ¯æ¬¡è¿›å…¥è§†é¢‘é¡µé¢æ—¶çš„ä¸€æ¬¡ sessionã€‚

å­—æ®µï¼š

- id
- employee_code
- user_id
- video_uid
- session_id
- started_at
- ended_at
- last_position_sec
- seconds_played
- source_ip
- user_agent

ç”¨é€”ï¼š

- ä¼šè¯è½¨è¿¹è®°å½•ï¼ˆä½ åæœŸåˆ¤æ–­æ™®é€šç»Ÿè®¡ç”¨ä¸åˆ°è¯¥è¡¨ï¼Œä½†ä¿ç•™æ‰©å±•æ€§ï¼‰

------

# **10. daily_visit_statsï¼ˆç”¨æˆ·è®¿é—®ç»Ÿè®¡ï¼‰**

å­—æ®µï¼š

- id
- user_id
- page_url
- visit_date
- visit_count
- created_at

ç”¨é€”ï¼š

- ç»Ÿè®¡ç”¨æˆ·è®¿é—®é¡µé¢çš„æ¬¡æ•°
- å¯ç”¨äºè¡Œä¸ºåˆ†æ

å…³ç³»ï¼š

```
daily_visit_stats.user_id n---1 emp_user.id
```

------

# **11. daily_total_visitsï¼ˆå…¨ç«™æ€»ä½“è®¿é—®ç»Ÿè®¡ï¼‰**

å­—æ®µï¼š

- id
- visit_date
- total_visits
- created_at

ç”¨é€”ï¼š

- è®°å½•æ•´ä¸ªå¹³å°æ¯å¤©çš„è®¿é—®æ¬¡æ•°
- ä¸ user_video_progress æ— ç›´æ¥å…³ç³»